apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: linkerd-control-plane
  namespace: linkerd
spec:
  values:
    linkerd-control-plane:
      destinationController:
        additionalEnv:
          - name: LICENSE
            valueFrom:
              secretKeyRef:
                key: license
                name: buoyant-enterprise-license
      heartbeat:
        additionalEnv:
          - name: LICENSE
            valueFrom:
              secretKeyRef:
                key: license
                name: custom-license-secret
      identity:
        additionalEnv:
          - name: LICENSE
            valueFrom:
              secretKeyRef:
                key: license
                name: buoyant-enterprise-license
      proxyInjector:
        additionalEnv:
          - name: LICENSE
            valueFrom:
              secretKeyRef:
                key: license
                name: buoyant-enterprise-license
      spValidator:
        additionalEnv:
          - name: LICENSE
            valueFrom:
              secretKeyRef:
                key: license
                name: buoyant-enterprise-license
